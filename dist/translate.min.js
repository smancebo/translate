!function(n,e){function a(n,a,t){a.loadLanguage(e.safeLangConfig).then(function(e){n.lang=e}),n.form={},void 0!==e.langObj&&""!==e.langObj||(e.langObj='{"description" : "ENGLISH", "langid" : "en"}'),n.form.selectedLanguage=JSON.parse(e.langObj),a.loadAvailableLanguages().then(function(r){n.Languages=r,n.translate=function(e){return n.lang[e]},n.getString=function(n){return t("translate")(n)},n.changeLanguage=function(){var t=n.form.selectedLanguage.id;e.langObj=JSON.stringify(n.form.selectedLanguage),a.loadLanguage(t).then(function(){location=location.pathname})},n.reloadLanguage=function(a){delete e.safeLang,delete e.safeLangConfig,delete e.langObj,n.form.selectedLanguage.id=a,n.changeLanguage()}})}function t(){function n(n){o=n}function a(n){i=n}function t(n){if(e.safeLang){var a=JSON.parse(e.safeLang);if(void 0!==a)return a[n]||"TAG NOT FOUND";g.loadLanguage(e.safeLangConfig).then(function(e){return e[n]})}}function r(n){return g(n)}function g(n){function a(a){var t=n.defer();void 0===a&&(a=e.safeLangConfig?e.safeLangConfig:i);var r=new XMLHttpRequest;return r.open("GET",o+"/"+a+"/lang.json"),r.onload=function(){if(r.status>=200&&r.status<400)try{var n=JSON.parse(r.responseText);e.safeLang=JSON.stringify(n),e.safeLangConfig=a,t.resolve(n)}catch(n){t.reject(n)}else t.reject(r)},r.send(),t.promise}function t(){var e=n.defer(),a=new XMLHttpRequest;return a.open("GET",o+"/languages.json"),a.onload=function(){if(a.status>=200&&a.status<400)try{var n=JSON.parse(a.responseText);e.resolve(n)}catch(n){e.reject(n)}else e.reject(a)},a.send(),e.promise}function r(n){if(e.safeLang){var a=JSON.parse(e.safeLang);if(void 0!==a)return a[n]||"TAG NOT FOUND";g.loadLanguage(e.safeLangConfig).then(function(e){return e[n]})}}return{loadLanguage:a,loadAvailableLanguages:t,getString:r}}var o="lang",i="en";this.setLangPath=n,this.setDefaultLanguage=a,this.getString=t,this.$get=r,r.$inject=["$q"]}function r(n){return function(a){if(e.safeLang){var t=JSON.parse(e.safeLang);if(void 0!==t)return t[a]||"TAG NOT FOUND";n.loadLanguage(e.safeLangConfig).then(function(n){return n[a]})}}}n.module("safe.translate",[]).run(a).provider("translateService",t).filter("translate",r),a.$inject=["$rootScope","translateService","$filter"],r.$inject=["translateService"]}(window.angular,window.localStorage);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zbGF0ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibG9jYWxTdG9yYWdlIiwicnVuRm4iLCIkcm9vdFNjb3BlIiwidHJhbnNsYXRlU2VydmljZSIsIiRmaWx0ZXIiLCJsb2FkTGFuZ3VhZ2UiLCJzYWZlTGFuZ0NvbmZpZyIsInRoZW4iLCJsYW5nIiwiZm9ybSIsInVuZGVmaW5lZCIsImxhbmdPYmoiLCJzZWxlY3RlZExhbmd1YWdlIiwiSlNPTiIsInBhcnNlIiwibG9hZEF2YWlsYWJsZUxhbmd1YWdlcyIsImxhbmd1YWdlcyIsIkxhbmd1YWdlcyIsInRyYW5zbGF0ZSIsInRleHQiLCJnZXRTdHJpbmciLCJzdHIiLCJjaGFuZ2VMYW5ndWFnZSIsImlkIiwic3RyaW5naWZ5IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInJlbG9hZExhbmd1YWdlIiwic2FmZUxhbmciLCJ0cmFuc2xhdGVTZXJ2aWNlUHJvdmlkZXIiLCJzZXRMYW5nUGF0aCIsIm5ld0xhbmdQYXRoIiwiX19sYW5nUGF0aCIsInNldERlZmF1bHRMYW5ndWFnZSIsIl9fZGVmYXVsdExhbmciLCJ0YWdOYW1lIiwibCIsIiRnZXQiLCIkcSIsImRlZmVyZWQiLCJkZWZlciIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJzdGF0dXMiLCJsYW5nQ29uZmlnIiwicmVzcG9uc2VUZXh0IiwicmVzb2x2ZSIsImUiLCJyZWplY3QiLCJzZW5kIiwicHJvbWlzZSIsInRoaXMiLCIkaW5qZWN0IiwiaW5wdXQiLCJtb2R1bGUiLCJydW4iLCJwcm92aWRlciIsImZpbHRlciIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsRUFBU0MsR0FnQmYsUUFBU0MsR0FBTUMsRUFBWUMsRUFBa0JDLEdBRTNDRCxFQUFpQkUsYUFBYUwsRUFBYU0sZ0JBQWdCQyxLQUFLLFNBQVNDLEdBQ3JFTixFQUFXTSxLQUFPQSxJQUd0Qk4sRUFBV08sUUFDa0JDLFNBQXpCVixFQUFhVyxT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cEJtQixNQUFLdkIsWUFBY0EsRUFDbkJ1QixLQUFLcEIsbUJBQXFCQSxFQUMxQm9CLEtBQUtqQyxVQUFZQSxFQUNqQmlDLEtBQUtoQixLQUFPQSxFQXdCWkEsRUFBS2lCLFNBQVcsTUF5RnBCLFFBQVNwQyxHQUFVZixHQUVqQixNQUFPLFVBQVNvRCxHQUNaLEdBQUl2RCxFQUFhNEIsU0FBVSxDQUV2QixHQUFJcEIsR0FBT0ssS0FBS0MsTUFBTWQsRUFBYTRCLFNBQ25DLElBQWFsQixTQUFURixFQUtBLE1BQU9BLEdBQUsrQyxJQUFVLGVBSnRCcEQsR0FBaUJFLGFBQWFMLEVBQWFNLGdCQUFnQkMsS0FBSyxTQUFTNkIsR0FDckUsTUFBT0EsR0FBRW1CLE9BOUszQnhELEVBQVF5RCxPQUFPLHFCQUNWQyxJQUFJeEQsR0FDSnlELFNBQVMsbUJBQW9CN0IsR0FDN0I4QixPQUFPLFlBQWF6QyxHQUd6QmpCLEVBQU1xRCxTQUFXLGFBQWEsbUJBQW9CLFdBK0psRHBDLEVBQVVvQyxTQUFXLHFCQWtCdEJNLE9BQU83RCxRQUFTNkQsT0FBTzVEIiwiZmlsZSI6InRyYW5zbGF0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oYW5ndWxhciwgbG9jYWxTdG9yYWdlKSB7XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogQW5ndWxhckpzIER5bmFtaWMgdHJhbnNsYXRlIFN0cmluZyBmaWx0ZXJcbiAgICAgKiBTYW11ZWwgSi4gTWFuY2Vib1xuICAgICAqIGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vc21hbmNlYm8vdHJhbnNsYXRlLmdpdFxuICAgICAqIDIwMTZcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3NhZmUudHJhbnNsYXRlJywgW10pXG4gICAgICAgIC5ydW4ocnVuRm4pXG4gICAgICAgIC5wcm92aWRlcigndHJhbnNsYXRlU2VydmljZScsIHRyYW5zbGF0ZVNlcnZpY2VQcm92aWRlcilcbiAgICAgICAgLmZpbHRlcigndHJhbnNsYXRlJywgdHJhbnNsYXRlKTtcblxuXG4gICAgcnVuRm4uJGluamVjdCA9IFsnJHJvb3RTY29wZScsJ3RyYW5zbGF0ZVNlcnZpY2UnLCAnJGZpbHRlciddO1xuICAgIGZ1bmN0aW9uIHJ1bkZuKCRyb290U2NvcGUsIHRyYW5zbGF0ZVNlcnZpY2UsICRmaWx0ZXIpIHtcblxuICAgICAgdHJhbnNsYXRlU2VydmljZS5sb2FkTGFuZ3VhZ2UobG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnKS50aGVuKGZ1bmN0aW9uKGxhbmcpIHtcbiAgICAgICAgICAkcm9vdFNjb3BlLmxhbmcgPSBsYW5nO1xuICAgICAgfSk7XG5cbiAgICAgICRyb290U2NvcGUuZm9ybSA9IHt9O1xuICAgICAgaWYgKGxvY2FsU3RvcmFnZS5sYW5nT2JqID09PSB1bmRlZmluZWQgfHwgbG9jYWxTdG9yYWdlLmxhbmdPYmogPT09IFwiXCIpIGxvY2FsU3RvcmFnZS5sYW5nT2JqID0gJ3tcImRlc2NyaXB0aW9uXCIgOiBcIkVOR0xJU0hcIiwgXCJsYW5naWRcIiA6IFwiZW5cIn0nO1xuXG4gICAgICAkcm9vdFNjb3BlLmZvcm0uc2VsZWN0ZWRMYW5ndWFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxhbmdPYmopO1xuICAgICAgdHJhbnNsYXRlU2VydmljZS5sb2FkQXZhaWxhYmxlTGFuZ3VhZ2VzKCkudGhlbihmdW5jdGlvbihsYW5ndWFnZXMpIHtcblxuICAgICAgICAgICRyb290U2NvcGUuTGFuZ3VhZ2VzID0gbGFuZ3VhZ2VzO1xuICAgICAgICAgICRyb290U2NvcGUudHJhbnNsYXRlID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgICAgICByZXR1cm4gJHJvb3RTY29wZS5sYW5nW3RleHRdO1xuICAgICAgICAgIH07XG4gICAgICAgICAgJHJvb3RTY29wZS5nZXRTdHJpbmcgPSBmdW5jdGlvbihzdHIpe1xuICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ3RyYW5zbGF0ZScpKHN0cik7XG4gICAgICAgICAgfTtcbiAgICAgICAgICAkcm9vdFNjb3BlLmNoYW5nZUxhbmd1YWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHZhciBsYW5nID0gJHJvb3RTY29wZS5mb3JtLnNlbGVjdGVkTGFuZ3VhZ2UuaWQ7XG4gICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sYW5nT2JqID0gSlNPTi5zdHJpbmdpZnkoJHJvb3RTY29wZS5mb3JtLnNlbGVjdGVkTGFuZ3VhZ2UpO1xuICAgICAgICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsYW5nKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSBsb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgICAkcm9vdFNjb3BlLnJlbG9hZExhbmd1YWdlID0gZnVuY3Rpb24obGFuZykge1xuXG4gICAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2Uuc2FmZUxhbmc7XG4gICAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWc7XG4gICAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2UubGFuZ09iajtcbiAgICAgICAgICAgICAgJHJvb3RTY29wZS5mb3JtLnNlbGVjdGVkTGFuZ3VhZ2UuaWQgPSBsYW5nO1xuICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNoYW5nZUxhbmd1YWdlKCk7XG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlU2VydmljZVByb3ZpZGVyKCkge1xuXG4gICAgICAgIHZhciBfX2xhbmdQYXRoID0gJ2xhbmcnO1xuICAgICAgICB2YXIgX19kZWZhdWx0TGFuZyA9ICdlbic7XG5cbiAgICAgICAgdGhpcy5zZXRMYW5nUGF0aCA9IHNldExhbmdQYXRoO1xuICAgICAgICB0aGlzLnNldERlZmF1bHRMYW5ndWFnZSA9IHNldERlZmF1bHRMYW5ndWFnZTtcbiAgICAgICAgdGhpcy5nZXRTdHJpbmcgPSBnZXRTdHJpbmc7XG4gICAgICAgIHRoaXMuJGdldCA9ICRnZXQ7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0TGFuZ1BhdGgobmV3TGFuZ1BhdGgpIHtcbiAgICAgICAgICAgIF9fbGFuZ1BhdGggPSBuZXdMYW5nUGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldERlZmF1bHRMYW5ndWFnZShsYW5nKXtcbiAgICAgICAgICBfX2RlZmF1bHRMYW5nID0gbGFuZztcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldFN0cmluZyh0YWdOYW1lKXtcbiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnNhZmVMYW5nKSB7XG5cbiAgICAgICAgICAgICAgdmFyIGxhbmcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zYWZlTGFuZyk7XG4gICAgICAgICAgICAgIGlmIChsYW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVNlcnZpY2UubG9hZExhbmd1YWdlKGxvY2FsU3RvcmFnZS5zYWZlTGFuZ0NvbmZpZykudGhlbihmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxbdGFnTmFtZV07XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBsYW5nW3RhZ05hbWVdIHx8IFwiVEFHIE5PVCBGT1VORFwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJGdldC4kaW5qZWN0ID0gWyckcSddO1xuICAgICAgICBmdW5jdGlvbiAkZ2V0KCRxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlU2VydmljZSgkcSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGVTZXJ2aWNlKCRxKSB7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRMYW5ndWFnZShsYW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5nID0gbG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZyA9IF9fZGVmYXVsdExhbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgX19sYW5nUGF0aCArICcvJyArIGxhbmcgKyAnL2xhbmcuanNvbicpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ0NvbmZpZyA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zYWZlTGFuZyA9IEpTT04uc3RyaW5naWZ5KGxhbmdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zYWZlTGFuZ0NvbmZpZyA9IGxhbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKGxhbmdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyZWQucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcmVkLnJlamVjdChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBsb2FkQXZhaWxhYmxlTGFuZ3VhZ2VzKCl7XG4gICAgICAgICAgICAgIHZhciBkZWZlcmVkICA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBfX2xhbmdQYXRoICsgJy9sYW5ndWFnZXMuanNvbicpO1xuICAgICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgNDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ3VhZ2VzID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKGxhbmd1YWdlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSl7XG4gICAgICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcmVkLnJlamVjdChyZXF1ZXN0KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyZWQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3RyaW5nKHRhZ05hbWUpe1xuICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnNhZmVMYW5nKSB7XG5cbiAgICAgICAgICAgICAgICAgIHZhciBsYW5nID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmcpO1xuICAgICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVNlcnZpY2UubG9hZExhbmd1YWdlKGxvY2FsU3RvcmFnZS5zYWZlTGFuZ0NvbmZpZykudGhlbihmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsW3RhZ05hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFuZ1t0YWdOYW1lXSB8fCBcIlRBRyBOT1QgRk9VTkRcIjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxvYWRMYW5ndWFnZTogbG9hZExhbmd1YWdlLFxuICAgICAgICAgICAgICAgIGxvYWRBdmFpbGFibGVMYW5ndWFnZXM6IGxvYWRBdmFpbGFibGVMYW5ndWFnZXMsXG4gICAgICAgICAgICAgICAgZ2V0U3RyaW5nOiBnZXRTdHJpbmdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0cmFuc2xhdGUuJGluamVjdCA9IFsndHJhbnNsYXRlU2VydmljZSddO1xuICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZSh0cmFuc2xhdGVTZXJ2aWNlKXtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5zYWZlTGFuZykge1xuXG4gICAgICAgICAgICAgIHZhciBsYW5nID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmcpO1xuICAgICAgICAgICAgICBpZiAobGFuZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWcpLnRoZW4oZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsW2lucHV0XTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhbmdbaW5wdXRdIHx8IFwiVEFHIE5PVCBGT1VORFwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbn0pKHdpbmRvdy5hbmd1bGFyLCB3aW5kb3cubG9jYWxTdG9yYWdlKTtcbiJdfQ==
