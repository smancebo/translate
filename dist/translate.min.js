!function(n,e){function a(n,a,t){a.loadLanguage(e.safeLangConfig).then(function(e){n.lang=e}),n.form={},void 0!==e.langObj&&""!==e.langObj||(e.langObj='{"description" : "ENGLISH", "langid" : "en"}'),n.form.selectedLanguage=JSON.parse(e.langObj),a.loadAvailableLanguages().then(function(g){n.Languages=g,n.translate=function(e){return n.lang[e]},n.getString=function(n){return t("translate")(n)},n.changeLanguage=function(){var t=n.form.selectedLanguage.id;e.langObj=JSON.stringify(n.form.selectedLanguage),a.loadLanguage(t).then(function(){location=location.pathname})},n.reloadLanguage=function(a){delete e.safeLang,delete e.safeLangConfig,delete e.langObj,n.form.selectedLanguage.id=a,n.changeLanguage()}})}function t(){function n(n){o=n}function a(n){i=n}function t(n){if(e.safeLang){var a=JSON.parse(e.safeLang);if(void 0!==a)return a[n]||"TAG NOT FOUND";r.loadLanguage(e.safeLangConfig).then(function(e){return e[n]})}}function g(n){return r(n)}function r(n){function a(a){var t=n.defer();void 0===a&&(a=e.safeLangConfig?e.safeLangConfig:i);var g=new XMLHttpRequest;return g.open("GET",o+"/"+a+"/lang.json"),g.onload=function(){try{var n=JSON.parse(g.responseText);e.safeLang=JSON.stringify(n),e.safeLangConfig=a,t.resolve(n)}catch(n){t.reject(n)}t.reject(g)},g.send(),t.promise}function t(){var e=n.defer(),a=new XMLHttpRequest;return a.open("GET",o+"/languages.json"),a.onload=function(){try{var n=JSON.parse(a.responseText);e.resolve(n)}catch(n){e.reject(n)}},a.send(),e.promise}function g(n){if(e.safeLang){var a=JSON.parse(e.safeLang);if(void 0!==a)return a[n]||"TAG NOT FOUND";r.loadLanguage(e.safeLangConfig).then(function(e){return e[n]})}}return{loadLanguage:a,loadAvailableLanguages:t,getString:g}}var o="lang",i="en";this.setLangPath=n,this.setDefaultLanguage=a,this.getString=t,this.$get=g,g.$inject=["$q"]}function g(n){return function(a){if(e.safeLang){var t=JSON.parse(e.safeLang);if(void 0!==t)return t[a]||"TAG NOT FOUND";n.loadLanguage(e.safeLangConfig).then(function(n){return n[a]})}}}n.module("safe.translate",[]).run(a).provider("translateService",t).filter("translate",g),a.$inject=["$rootScope","translateService","$filter"],g.$inject=["translateService"]}(window.angular,window.localStorage);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zbGF0ZS5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibG9jYWxTdG9yYWdlIiwicnVuRm4iLCIkcm9vdFNjb3BlIiwidHJhbnNsYXRlU2VydmljZSIsIiRmaWx0ZXIiLCJsb2FkTGFuZ3VhZ2UiLCJzYWZlTGFuZ0NvbmZpZyIsInRoZW4iLCJsYW5nIiwiZm9ybSIsInVuZGVmaW5lZCIsImxhbmdPYmoiLCJzZWxlY3RlZExhbmd1YWdlIiwiSlNPTiIsInBhcnNlIiwibG9hZEF2YWlsYWJsZUxhbmd1YWdlcyIsImxhbmd1YWdlcyIsIkxhbmd1YWdlcyIsInRyYW5zbGF0ZSIsInRleHQiLCJnZXRTdHJpbmciLCJzdHIiLCJjaGFuZ2VMYW5ndWFnZSIsImlkIiwic3RyaW5naWZ5IiwibG9jYXRpb24iLCJwYXRobmFtZSIsInJlbG9hZExhbmd1YWdlIiwic2FmZUxhbmciLCJ0cmFuc2xhdGVTZXJ2aWNlUHJvdmlkZXIiLCJzZXRMYW5nUGF0aCIsIm5ld0xhbmdQYXRoIiwiX19sYW5nUGF0aCIsInNldERlZmF1bHRMYW5ndWFnZSIsIl9fZGVmYXVsdExhbmciLCJ0YWdOYW1lIiwibCIsIiRnZXQiLCIkcSIsImRlZmVyZWQiLCJkZWZlciIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJsYW5nQ29uZmlnIiwicmVzcG9uc2VUZXh0IiwicmVzb2x2ZSIsImUiLCJyZWplY3QiLCJzZW5kIiwicHJvbWlzZSIsInRoaXMiLCIkaW5qZWN0IiwiaW5wdXQiLCJtb2R1bGUiLCJydW4iLCJwcm92aWRlciIsImZpbHRlciIsIndpbmRvdyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBVUEsRUFBU0MsR0FpQmYsUUFBU0MsR0FBTUMsRUFBWUMsRUFBa0JDLEdBRXpDRCxFQUFpQkUsYUFBYUwsRUFBYU0sZ0JBQWdCQyxLQUFLLFNBQVNDLEdBQ3JFTixFQUFXTSxLQUFPQSxJQUd0Qk4sRUFBV08sUUFDa0JDLFNBQXpCVixFQUFhVyxTQUFrRCxLQUF6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bkMsR0FBVWYsR0FFZixNQUFPLFVBQVNtRCxHQUNaLEdBQUl0RCxFQUFhNEIsU0FBVSxDQUV2QixHQUFJcEIsR0FBT0ssS0FBS0MsTUFBTWQsRUFBYTRCLFNBQ25DLElBQWFsQixTQUFURixFQUtBLE1BQU9BLEdBQUs4QyxJQUFVLGVBSnRCbkQsR0FBaUJFLGFBQWFMLEVBQWFNLGdCQUFnQkMsS0FBSyxTQUFTNkIsR0FDckUsTUFBT0EsR0FBRWtCLE9Bdks3QnZELEVBQVF3RCxPQUFPLHFCQUNWQyxJQUFJdkQsR0FDSndELFNBQVMsbUJBQW9CNUIsR0FDN0I2QixPQUFPLFlBQWF4QyxHQUd6QmpCLEVBQU1vRCxTQUFXLGFBQWMsbUJBQW9CLFdBdUpuRG5DLEVBQVVtQyxTQUFXLHFCQW1CdEJNLE9BQU81RCxRQUFTNEQsT0FBTzNEIiwiZmlsZSI6InRyYW5zbGF0ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oYW5ndWxhciwgbG9jYWxTdG9yYWdlKSB7XG5cbiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogQW5ndWxhckpzIER5bmFtaWMgdHJhbnNsYXRlIFN0cmluZyBmaWx0ZXJcbiAgICAgKiBTYW11ZWwgSi4gTWFuY2Vib1xuICAgICAqIGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vc21hbmNlYm8vdHJhbnNsYXRlLmdpdFxuICAgICAqIDIwMTZcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3NhZmUudHJhbnNsYXRlJywgW10pXG4gICAgICAgIC5ydW4ocnVuRm4pXG4gICAgICAgIC5wcm92aWRlcigndHJhbnNsYXRlU2VydmljZScsIHRyYW5zbGF0ZVNlcnZpY2VQcm92aWRlcilcbiAgICAgICAgLmZpbHRlcigndHJhbnNsYXRlJywgdHJhbnNsYXRlKTtcblxuXG4gICAgcnVuRm4uJGluamVjdCA9IFsnJHJvb3RTY29wZScsICd0cmFuc2xhdGVTZXJ2aWNlJywgJyRmaWx0ZXInXTtcblxuICAgIGZ1bmN0aW9uIHJ1bkZuKCRyb290U2NvcGUsIHRyYW5zbGF0ZVNlcnZpY2UsICRmaWx0ZXIpIHtcblxuICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWcpLnRoZW4oZnVuY3Rpb24obGFuZykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS5sYW5nID0gbGFuZztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHJvb3RTY29wZS5mb3JtID0ge307XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UubGFuZ09iaiA9PT0gdW5kZWZpbmVkIHx8IGxvY2FsU3RvcmFnZS5sYW5nT2JqID09PSBcIlwiKSBsb2NhbFN0b3JhZ2UubGFuZ09iaiA9ICd7XCJkZXNjcmlwdGlvblwiIDogXCJFTkdMSVNIXCIsIFwibGFuZ2lkXCIgOiBcImVuXCJ9JztcblxuICAgICAgICAkcm9vdFNjb3BlLmZvcm0uc2VsZWN0ZWRMYW5ndWFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmxhbmdPYmopO1xuICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRBdmFpbGFibGVMYW5ndWFnZXMoKS50aGVuKGZ1bmN0aW9uKGxhbmd1YWdlcykge1xuXG4gICAgICAgICAgICAkcm9vdFNjb3BlLkxhbmd1YWdlcyA9IGxhbmd1YWdlcztcbiAgICAgICAgICAgICRyb290U2NvcGUudHJhbnNsYXRlID0gZnVuY3Rpb24odGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkcm9vdFNjb3BlLmxhbmdbdGV4dF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJHJvb3RTY29wZS5nZXRTdHJpbmcgPSBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZpbHRlcigndHJhbnNsYXRlJykoc3RyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkcm9vdFNjb3BlLmNoYW5nZUxhbmd1YWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxhbmcgPSAkcm9vdFNjb3BlLmZvcm0uc2VsZWN0ZWRMYW5ndWFnZS5pZDtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UubGFuZ09iaiA9IEpTT04uc3RyaW5naWZ5KCRyb290U2NvcGUuZm9ybS5zZWxlY3RlZExhbmd1YWdlKTtcbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsYW5nKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IGxvY2F0aW9uLnBhdGhuYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICRyb290U2NvcGUucmVsb2FkTGFuZ3VhZ2UgPSBmdW5jdGlvbihsYW5nKSB7XG5cbiAgICAgICAgICAgICAgICBkZWxldGUgbG9jYWxTdG9yYWdlLnNhZmVMYW5nO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWc7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZS5sYW5nT2JqO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuZm9ybS5zZWxlY3RlZExhbmd1YWdlLmlkID0gbGFuZztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNoYW5nZUxhbmd1YWdlKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHRyYW5zbGF0ZVNlcnZpY2VQcm92aWRlcigpIHtcblxuICAgICAgICB2YXIgX19sYW5nUGF0aCA9ICdsYW5nJztcbiAgICAgICAgdmFyIF9fZGVmYXVsdExhbmcgPSAnZW4nO1xuXG4gICAgICAgIHRoaXMuc2V0TGFuZ1BhdGggPSBzZXRMYW5nUGF0aDtcbiAgICAgICAgdGhpcy5zZXREZWZhdWx0TGFuZ3VhZ2UgPSBzZXREZWZhdWx0TGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMuZ2V0U3RyaW5nID0gZ2V0U3RyaW5nO1xuICAgICAgICB0aGlzLiRnZXQgPSAkZ2V0O1xuXG4gICAgICAgIGZ1bmN0aW9uIHNldExhbmdQYXRoKG5ld0xhbmdQYXRoKSB7XG4gICAgICAgICAgICBfX2xhbmdQYXRoID0gbmV3TGFuZ1BhdGg7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZykge1xuICAgICAgICAgICAgX19kZWZhdWx0TGFuZyA9IGxhbmc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRTdHJpbmcodGFnTmFtZSkge1xuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5zYWZlTGFuZykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGxhbmcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zYWZlTGFuZyk7XG4gICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWcpLnRoZW4oZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxbdGFnTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYW5nW3RhZ05hbWVdIHx8IFwiVEFHIE5PVCBGT1VORFwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRnZXQuJGluamVjdCA9IFsnJHEnXTtcblxuICAgICAgICBmdW5jdGlvbiAkZ2V0KCRxKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlU2VydmljZSgkcSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0cmFuc2xhdGVTZXJ2aWNlKCRxKSB7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRMYW5ndWFnZShsYW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5nID0gbG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFuZyA9IF9fZGVmYXVsdExhbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignR0VUJywgX19sYW5nUGF0aCArICcvJyArIGxhbmcgKyAnL2xhbmcuanNvbicpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZ0NvbmZpZyA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNhZmVMYW5nID0gSlNPTi5zdHJpbmdpZnkobGFuZ0NvbmZpZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWcgPSBsYW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJlZC5yZXNvbHZlKGxhbmdDb25maWcpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcmVkLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGRlZmVyZWQucmVqZWN0KHJlcXVlc3QpO1xuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcmVkLnByb21pc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGxvYWRBdmFpbGFibGVMYW5ndWFnZXMoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIF9fbGFuZ1BhdGggKyAnL2xhbmd1YWdlcy5qc29uJyk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYW5ndWFnZXMgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVyZWQucmVzb2x2ZShsYW5ndWFnZXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcmVkLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZW5kKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJlZC5wcm9taXNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdHJpbmcodGFnTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uuc2FmZUxhbmcpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFuZyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLnNhZmVMYW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlU2VydmljZS5sb2FkTGFuZ3VhZ2UobG9jYWxTdG9yYWdlLnNhZmVMYW5nQ29uZmlnKS50aGVuKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbFt0YWdOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhbmdbdGFnTmFtZV0gfHwgXCJUQUcgTk9UIEZPVU5EXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbG9hZExhbmd1YWdlOiBsb2FkTGFuZ3VhZ2UsXG4gICAgICAgICAgICAgICAgbG9hZEF2YWlsYWJsZUxhbmd1YWdlczogbG9hZEF2YWlsYWJsZUxhbmd1YWdlcyxcbiAgICAgICAgICAgICAgICBnZXRTdHJpbmc6IGdldFN0cmluZ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyYW5zbGF0ZS4kaW5qZWN0ID0gWyd0cmFuc2xhdGVTZXJ2aWNlJ107XG5cbiAgICBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNsYXRlU2VydmljZSkge1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5zYWZlTGFuZykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGxhbmcgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5zYWZlTGFuZyk7XG4gICAgICAgICAgICAgICAgaWYgKGxhbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2xhdGVTZXJ2aWNlLmxvYWRMYW5ndWFnZShsb2NhbFN0b3JhZ2Uuc2FmZUxhbmdDb25maWcpLnRoZW4oZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxbaW5wdXRdO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFuZ1tpbnB1dF0gfHwgXCJUQUcgTk9UIEZPVU5EXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxufSkod2luZG93LmFuZ3VsYXIsIHdpbmRvdy5sb2NhbFN0b3JhZ2UpO1xuIl19
