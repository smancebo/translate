!function(e,n){function a(e,a,t){a.loadLanguage(n.safeLangConfig).then(function(n){e.lang=n}),e.form={},void 0!==n.langObj&&""!==n.langObj||(n.langObj='{"description" : "ENGLISH", "langid" : "en"}'),e.form.selectedLanguage=JSON.parse(n.langObj),a.loadAvailableLanguages().then(function(r){e.Languages=r,e.translate=function(n){return e.lang[n]},e.getString=function(e){return t("translate")(e)},e.changeLanguage=function(){var t=e.form.selectedLanguage.id;n.langObj=JSON.stringify(e.form.selectedLanguage),a.loadLanguage(t).then(function(){location=location.pathname})},e.reloadLanguage=function(a){delete n.safeLang,delete n.safeLangConfig,delete n.langObj,e.form.selectedLanguage.id=a,e.changeLanguage()}})}function t(){function e(e){r=e}function a(e){return t(e)}function t(e){function a(a){var t=e.defer();void 0===a&&(a=n.safeLangConfig?n.safeLangConfig:"en");var o=new XMLHttpRequest;return o.open("GET",r+"/"+a+"/lang.json"),o.onload=function(){if(o.status>=200&&o.status<400)try{var e=JSON.parse(o.responseText);n.safeLang=JSON.stringify(e),n.safeLangConfig=a,t.resolve(e)}catch(e){t.reject(e)}else t.reject(o)},o.send(),t.promise}function t(){var n=e.defer(),a=new XMLHttpRequest;return a.open("GET",r+"/languages.json"),a.onload=function(){if(a.status>=200&&a.status<400)try{var e=JSON.parse(a.responseText);n.resolve(e)}catch(e){n.reject(e)}else n.reject(a)},a.send(),n.promise}return{loadLanguage:a,loadAvailableLanguages:t}}var r="lang";this.setLangPath=e,this.$get=a,a.$inject=["$q"]}function r(e){return function(a){if(n.safeLang){var t=JSON.parse(n.safeLang);if(void 0!==t)return t[a]||"TAG NOT FOUND";e.loadLanguage(n.safeLangConfig).then(function(e){return e[a]})}}}e.module("safe.translate",[]).run(a).provider("translateService",t).filter("translate",r),a.$inject=["$rootScope","translateService","$filter"],r.$inject=["translateService"]}(window.angular,window.localStorage);